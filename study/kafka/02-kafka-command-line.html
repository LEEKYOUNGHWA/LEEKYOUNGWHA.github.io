<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>카프카 커맨드라인 툴 | MIND UPLOAD</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.jpg">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-672PNZBWWP"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-672PNZBWWP');</script>
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8111136017997298" crossorigin="anonymous"></script>
    <meta name="description" content="vuepress blog">
    <meta property="article:modified_time" content="2024/10/07 16:28:00">
    <meta property="og:site_name" content="MIND UPLOAD">
    <meta property="og:title" content="카프카 커맨드라인 툴">
    <meta property="og:type" content="website">
    <meta property="og:url" content="leekyounghwa.github.io/study/kafka/02-kafka-command-line.html">
    <meta property="og:image" content="https://velog.velcdn.com/images/gsun/post/64573b02-6890-4bf8-a50c-91210e6c9063/image.png">
    <meta name="twitter:title" content="카프카 커맨드라인 툴">
    <meta name="twitter:url" content="leekyounghwa.github.io/study/kafka/02-kafka-command-line.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://velog.velcdn.com/images/gsun/post/64573b02-6890-4bf8-a50c-91210e6c9063/image.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="kafka">
    <meta property="article:tag" content="kafka">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.b35e2516.css" as="style"><link rel="preload" href="/assets/js/app.1803463e.js" as="script"><link rel="preload" href="/assets/js/2.114321ad.js" as="script"><link rel="preload" href="/assets/js/1.48ed5838.js" as="script"><link rel="preload" href="/assets/js/34.11a6e354.js" as="script"><link rel="prefetch" href="/assets/js/100.eac35da4.js"><link rel="prefetch" href="/assets/js/101.12258cc1.js"><link rel="prefetch" href="/assets/js/102.855c4466.js"><link rel="prefetch" href="/assets/js/103.149ea756.js"><link rel="prefetch" href="/assets/js/104.bedd735b.js"><link rel="prefetch" href="/assets/js/105.d1aa6009.js"><link rel="prefetch" href="/assets/js/106.8fc0dd15.js"><link rel="prefetch" href="/assets/js/107.0094b4b3.js"><link rel="prefetch" href="/assets/js/108.13d02eef.js"><link rel="prefetch" href="/assets/js/109.3ecbb07e.js"><link rel="prefetch" href="/assets/js/110.6a665a79.js"><link rel="prefetch" href="/assets/js/111.84a6763f.js"><link rel="prefetch" href="/assets/js/112.3b678e56.js"><link rel="prefetch" href="/assets/js/113.a5843e7c.js"><link rel="prefetch" href="/assets/js/114.ae1841ec.js"><link rel="prefetch" href="/assets/js/115.db6387eb.js"><link rel="prefetch" href="/assets/js/116.56c7d6f1.js"><link rel="prefetch" href="/assets/js/117.ed7fd112.js"><link rel="prefetch" href="/assets/js/118.d46dd251.js"><link rel="prefetch" href="/assets/js/119.ea306945.js"><link rel="prefetch" href="/assets/js/12.096af198.js"><link rel="prefetch" href="/assets/js/120.f918c762.js"><link rel="prefetch" href="/assets/js/121.2c3d185f.js"><link rel="prefetch" href="/assets/js/122.3af868e3.js"><link rel="prefetch" href="/assets/js/123.d9ff3683.js"><link rel="prefetch" href="/assets/js/124.854614ff.js"><link rel="prefetch" href="/assets/js/125.6aaf5f2c.js"><link rel="prefetch" href="/assets/js/126.403f98e2.js"><link rel="prefetch" href="/assets/js/127.e4d1ed49.js"><link rel="prefetch" href="/assets/js/128.6718fba2.js"><link rel="prefetch" href="/assets/js/129.6e0b0b94.js"><link rel="prefetch" href="/assets/js/13.43332938.js"><link rel="prefetch" href="/assets/js/130.e75ab2c5.js"><link rel="prefetch" href="/assets/js/131.77e00221.js"><link rel="prefetch" href="/assets/js/132.fd2d07be.js"><link rel="prefetch" href="/assets/js/133.5ce0bcd6.js"><link rel="prefetch" href="/assets/js/134.c6ae46c9.js"><link rel="prefetch" href="/assets/js/135.77d4211b.js"><link rel="prefetch" href="/assets/js/136.034cc34a.js"><link rel="prefetch" href="/assets/js/137.6de167a8.js"><link rel="prefetch" href="/assets/js/138.61a81d97.js"><link rel="prefetch" href="/assets/js/139.aad0f72a.js"><link rel="prefetch" href="/assets/js/14.0db93d1d.js"><link rel="prefetch" href="/assets/js/140.19dd67ed.js"><link rel="prefetch" href="/assets/js/141.03662b70.js"><link rel="prefetch" href="/assets/js/142.d76d547a.js"><link rel="prefetch" href="/assets/js/143.29731780.js"><link rel="prefetch" href="/assets/js/144.8f93a453.js"><link rel="prefetch" href="/assets/js/145.fa289d2b.js"><link rel="prefetch" href="/assets/js/146.d1c4f6ee.js"><link rel="prefetch" href="/assets/js/147.e43f4766.js"><link rel="prefetch" href="/assets/js/148.bce60f07.js"><link rel="prefetch" href="/assets/js/15.fbca21d5.js"><link rel="prefetch" href="/assets/js/16.9198909d.js"><link rel="prefetch" href="/assets/js/17.9612f79e.js"><link rel="prefetch" href="/assets/js/18.7b246222.js"><link rel="prefetch" href="/assets/js/19.a88e8878.js"><link rel="prefetch" href="/assets/js/20.1cfdc467.js"><link rel="prefetch" href="/assets/js/21.a8367a94.js"><link rel="prefetch" href="/assets/js/22.b6f64260.js"><link rel="prefetch" href="/assets/js/23.8bac4bda.js"><link rel="prefetch" href="/assets/js/24.b562dc5b.js"><link rel="prefetch" href="/assets/js/25.4b47ddcd.js"><link rel="prefetch" href="/assets/js/26.14d4e32d.js"><link rel="prefetch" href="/assets/js/27.4380c074.js"><link rel="prefetch" href="/assets/js/28.7b36774b.js"><link rel="prefetch" href="/assets/js/29.d70bf530.js"><link rel="prefetch" href="/assets/js/3.a4144306.js"><link rel="prefetch" href="/assets/js/30.a4cbb296.js"><link rel="prefetch" href="/assets/js/31.3a68ad1d.js"><link rel="prefetch" href="/assets/js/32.7dc3d279.js"><link rel="prefetch" href="/assets/js/33.6d20313d.js"><link rel="prefetch" href="/assets/js/35.91f128ae.js"><link rel="prefetch" href="/assets/js/36.dbb0a35a.js"><link rel="prefetch" href="/assets/js/37.f9670500.js"><link rel="prefetch" href="/assets/js/38.efb820f4.js"><link rel="prefetch" href="/assets/js/39.034e0ca3.js"><link rel="prefetch" href="/assets/js/4.493e4934.js"><link rel="prefetch" href="/assets/js/40.da34b733.js"><link rel="prefetch" href="/assets/js/41.ec599f2a.js"><link rel="prefetch" href="/assets/js/42.1c8a96fd.js"><link rel="prefetch" href="/assets/js/43.aa93ed1f.js"><link rel="prefetch" href="/assets/js/44.dc57a99a.js"><link rel="prefetch" href="/assets/js/45.acb14abf.js"><link rel="prefetch" href="/assets/js/46.477c9e38.js"><link rel="prefetch" href="/assets/js/47.f01a9e68.js"><link rel="prefetch" href="/assets/js/48.b5c1e190.js"><link rel="prefetch" href="/assets/js/49.d80d62e5.js"><link rel="prefetch" href="/assets/js/5.3d17526b.js"><link rel="prefetch" href="/assets/js/50.ff3db2de.js"><link rel="prefetch" href="/assets/js/51.c4262de4.js"><link rel="prefetch" href="/assets/js/52.97e45e2f.js"><link rel="prefetch" href="/assets/js/53.79a3501c.js"><link rel="prefetch" href="/assets/js/54.d343c0a6.js"><link rel="prefetch" href="/assets/js/55.e9dbbe62.js"><link rel="prefetch" href="/assets/js/56.5d2a9008.js"><link rel="prefetch" href="/assets/js/57.a6768221.js"><link rel="prefetch" href="/assets/js/58.86db81bd.js"><link rel="prefetch" href="/assets/js/59.d10e41c7.js"><link rel="prefetch" href="/assets/js/6.7987f26d.js"><link rel="prefetch" href="/assets/js/60.1784a98d.js"><link rel="prefetch" href="/assets/js/61.b5eafbd8.js"><link rel="prefetch" href="/assets/js/62.28d69f76.js"><link rel="prefetch" href="/assets/js/63.200e2686.js"><link rel="prefetch" href="/assets/js/64.709a3b60.js"><link rel="prefetch" href="/assets/js/65.e06119fd.js"><link rel="prefetch" href="/assets/js/66.f1870113.js"><link rel="prefetch" href="/assets/js/67.9125ce80.js"><link rel="prefetch" href="/assets/js/68.4d7eac15.js"><link rel="prefetch" href="/assets/js/69.b672bda8.js"><link rel="prefetch" href="/assets/js/7.1eada8a4.js"><link rel="prefetch" href="/assets/js/70.e9b6e08f.js"><link rel="prefetch" href="/assets/js/71.e25c01a4.js"><link rel="prefetch" href="/assets/js/72.ef5c6385.js"><link rel="prefetch" href="/assets/js/73.6e07a77e.js"><link rel="prefetch" href="/assets/js/74.6ecfd390.js"><link rel="prefetch" href="/assets/js/75.df2d78fe.js"><link rel="prefetch" href="/assets/js/76.aedfda20.js"><link rel="prefetch" href="/assets/js/77.237d4dce.js"><link rel="prefetch" href="/assets/js/78.9e563f45.js"><link rel="prefetch" href="/assets/js/79.af4fbbf8.js"><link rel="prefetch" href="/assets/js/8.5463e0b2.js"><link rel="prefetch" href="/assets/js/80.b9da9c19.js"><link rel="prefetch" href="/assets/js/81.fbfae30a.js"><link rel="prefetch" href="/assets/js/82.ccd776c9.js"><link rel="prefetch" href="/assets/js/83.66520295.js"><link rel="prefetch" href="/assets/js/84.ceec13df.js"><link rel="prefetch" href="/assets/js/85.3d0743e5.js"><link rel="prefetch" href="/assets/js/86.fea7968e.js"><link rel="prefetch" href="/assets/js/87.900098f7.js"><link rel="prefetch" href="/assets/js/88.0593fd26.js"><link rel="prefetch" href="/assets/js/89.4573adfa.js"><link rel="prefetch" href="/assets/js/90.3a247c62.js"><link rel="prefetch" href="/assets/js/91.5026fed8.js"><link rel="prefetch" href="/assets/js/92.72e4e4c6.js"><link rel="prefetch" href="/assets/js/93.8afdbc29.js"><link rel="prefetch" href="/assets/js/94.3aef90e4.js"><link rel="prefetch" href="/assets/js/95.2af1811b.js"><link rel="prefetch" href="/assets/js/96.cf04ba72.js"><link rel="prefetch" href="/assets/js/97.ad18e888.js"><link rel="prefetch" href="/assets/js/98.f1a43a3d.js"><link rel="prefetch" href="/assets/js/99.8d98a9fd.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.462d82b9.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.f763044c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b35e2516.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="MIND UPLOAD" class="logo"> <span class="site-name can-hide">MIND UPLOAD</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/posts/" class="nav-link">
  TIL
</a></div><div class="nav-item"><a href="/study/" class="nav-link router-link-active">
  study
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  blog
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/posts/" class="nav-link">
  TIL
</a></div><div class="nav-item"><a href="/study/" class="nav-link router-link-active">
  study
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  blog
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>flask</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>flutter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>kafka</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/kafka/01-kafka-aws.html" class="sidebar-link">실습용 카프카 브로커 설치</a></li><li><a href="/study/kafka/02-kafka-command-line.html" aria-current="page" class="active sidebar-link">카프카 커맨드라인 툴</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-topics-sh" class="sidebar-link">kafka-topics.sh</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-console-producer-sh" class="sidebar-link">kafka-console-producer.sh</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-console-consumer-sh" class="sidebar-link">kafka-console-consumer.sh</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-consumer-group-sh" class="sidebar-link">kafka-consumer-group.sh</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-verifiable-producer-consumer-sh" class="sidebar-link">kafka-verifiable-producer, consumer.sh</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-delete-records-sh" class="sidebar-link">kafka-delete-records.sh</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#kafka-shutdown" class="sidebar-link">kafka shutdown</a></li><li class="sidebar-sub-header"><a href="/study/kafka/02-kafka-command-line.html#누구냐-넌" class="sidebar-link">누구냐 넌</a></li></ul></li><li><a href="/study/kafka/03-kafka-client.html" class="sidebar-link">카프카 클라이언트</a></li><li><a href="/study/kafka/04-kafka-consumer.html" class="sidebar-link">컨슈머 API</a></li><li><a href="/study/kafka/05-kafka-streams.html" class="sidebar-link">카프카 스트림즈</a></li><li><a href="/study/kafka/06-kafka-connect.html" class="sidebar-link">카프카 커넥트</a></li><li><a href="/study/kafka/07-kafka-spring.html" class="sidebar-link">스프링 카프카</a></li><li><a href="/study/kafka/08-kafka-application.html" class="sidebar-link">Kafka broker + Spring boot kafka producer + Spring Kafka batch listner</a></li><li><a href="/study/kafka/09-kafka-hr.html" class="sidebar-link">카프카 Pilot Project</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>oopInSpring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>pythonCodingDojang</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>thisIsJava</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="카프카-커맨드라인-툴"><a href="#카프카-커맨드라인-툴" class="header-anchor">#</a> 카프카 커맨드라인 툴</h1> <h4 id="호스트-설정"><a href="#호스트-설정" class="header-anchor">#</a> 호스트 설정</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/hosts
<span class="token number">3.21</span>.129.47 my-kafka
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="kafka-topics-sh"><a href="#kafka-topics-sh" class="header-anchor">#</a> kafka-topics.sh</h2> <ul><li><strong>토픽</strong> : 카프카에서 데이터를 구성하는 가장 기본 개념. RDBMS의 테이블과 유사하다고 볼 수 있다. 토픽은 카프카 컨슈머 또는 프로듀서가 카프카 브로커에 생성되지 않은 토픽에 대해 데이터를 요청할때, 혹은 커맨드 라인 툴로 명시적으로 토픽을 생성할 수 있다. 토픽을 효과적으로 유지보수 하기 위해서는 토픽을 명시적으로 생성하는 것을 추천.</li></ul> <h3 id="토픽-생성"><a href="#토픽-생성" class="header-anchor">#</a> 토픽 생성</h3> <p><code>로컬</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-topics.sh <span class="token parameter variable">--create</span> --bootstrap-server <span class="token number">3.21</span>.129.47:9092 <span class="token parameter variable">--topic</span> hello.kafka

bin/kafka-topics.sh <span class="token punctuation">\</span>
<span class="token parameter variable">--create</span> <span class="token punctuation">\</span> <span class="token comment"># 토픽 생성 명령어</span>
--bootstrap-server my-kafka:9092 <span class="token punctuation">\</span> <span class="token comment"># 토픽을 생성할 카프카 클러스터를 구성하는 브로커들의 ip 와 port</span>
<span class="token parameter variable">--partitions</span> <span class="token number">3</span> <span class="token punctuation">\</span> <span class="token comment"># 파티션 개수</span>
--replication-factor <span class="token number">1</span> <span class="token punctuation">\</span> <span class="token comment"># 파티션 복제할 복제 개수</span>
<span class="token parameter variable">--config</span> <span class="token assign-left variable">retention.ms</span><span class="token operator">=</span><span class="token number">172800000</span> <span class="token punctuation">\</span> <span class="token comment"># 추가 설정 (데이터 유지 기간, 172800000은 2일이다.)</span>
<span class="token parameter variable">--topic</span> hello.kafka.2 <span class="token comment"># 토픽 이름</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img alt="10" data-src="/assets/img/10.9a7d96e7.png" loading="lazy" class="lazy"></p> <h3 id="토픽-리스트-조회"><a href="#토픽-리스트-조회" class="header-anchor">#</a> 토픽 리스트 조회</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-topics.sh --bootstrap-server my-kafka:9092 <span class="token parameter variable">--list</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="토픽-상세조회"><a href="#토픽-상세조회" class="header-anchor">#</a> 토픽 상세조회</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-topics.sh --bootstrap-server my-kafka:9092 <span class="token parameter variable">--describe</span> <span class="token parameter variable">--topic</span> hello.kafka.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="11" data-src="/assets/img/11.68d126e9.png" loading="lazy" class="lazy"></p> <h3 id="토픽-옵션-수정"><a href="#토픽-옵션-수정" class="header-anchor">#</a> 토픽 옵션 수정</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 파티션 개수 변경</span>
bin/kafka-topics.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token parameter variable">--topic</span> hello.kafka <span class="token punctuation">\</span>
<span class="token parameter variable">--alter</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--partitions</span> <span class="token number">4</span> 

<span class="token comment"># 파티션 확인</span>
bin/kafka-topics.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token parameter variable">--topic</span> hello.kafka <span class="token punctuation">\</span>
<span class="token parameter variable">--describe</span> 

<span class="token comment"># retention 설정. --add-config:이미 존재하는 설정값은 변경, 존재하지 않는 설정값은 신규</span>
bin/kafka-configs.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
--entity-type topics <span class="token punctuation">\</span>
--entity-name hello.kafka <span class="token punctuation">\</span>
<span class="token parameter variable">--alter</span> --add-config <span class="token assign-left variable">retention.ms</span><span class="token operator">=</span><span class="token number">86400000</span>

<span class="token comment"># retention 확인</span>
bin/kafka-configs.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
--entity-type topics <span class="token punctuation">\</span>
--entity-name hello.kafka <span class="token parameter variable">--describe</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="kafka-console-producer-sh"><a href="#kafka-console-producer-sh" class="header-anchor">#</a> kafka-console-producer.sh</h2> <p>kafka-console-producer.sh 로 생성된 hello.kafka 토픽에 데이터를 넣을 수 있다</p> <p>토픽에 넣는 데이터는 <code>레코드(record)</code> 라고 부르며 메시지 키(key)와 메시지 값(value)으로 이루어져 있다.</p> <p>메시지 키 없이 값만 보내기. 키는 자바의 null로 기본 설정되어 브로커로 전송된다.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-console-producer.sh --bootstrap-server my-kafka:9092 <span class="token parameter variable">--topic</span> hello.kafka
<span class="token operator">&gt;</span> hello
<span class="token operator">&gt;</span> kafka
<span class="token operator">&gt;</span> <span class="token number">0</span>
<span class="token operator">&gt;</span> <span class="token number">1</span>
<span class="token operator">&gt;</span> <span class="token number">2</span>
<span class="token operator">&gt;</span> <span class="token number">3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>메시지 키를 가지는 레코드 보내기</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-console-producer.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token parameter variable">--topic</span> hello.kafka <span class="token punctuation">\</span>
<span class="token parameter variable">--property</span> <span class="token string">&quot;parse.key=true&quot;</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--property</span> <span class="token string">&quot;key.separator=:&quot;</span>
<span class="token operator">&gt;</span>key1:no1
<span class="token operator">&gt;</span>key2:no2
<span class="token operator">&gt;</span>key3:no3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>구분자를 설정하지 않으면 기본 설정은 tab delimiter(/t) 이다</p> <p>메시지 키와 메시지 값을 함께 전송한 레코드는 토픽의 파티션에 저장된다. 메시지 키가 존재하는 경우에는 키의 해시값을 작성하여 존재하는 파티션중 한개에 할당된다. 메시지 키가 동일한 경우에는 동일한 파티션으로 전송된다.</p> <h2 id="kafka-console-consumer-sh"><a href="#kafka-console-consumer-sh" class="header-anchor">#</a> kafka-console-consumer.sh</h2> <p>데이터 확인</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-console-consumer.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--topic</span> hello.kafka <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --from-beginning
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>키와 값 확인</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-console-consumer.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--topic</span> hello.kafka <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--property</span> <span class="token assign-left variable">print.key</span><span class="token operator">=</span>true <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--property</span> <span class="token assign-left variable">key.separator</span><span class="token operator">=</span><span class="token string">&quot;-&quot;</span> <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--group</span> hello-group <span class="token punctuation">\</span> <span class="token comment"># 컨슈머 그룹 생성</span>
<span class="token operator">&gt;</span> --from-beginning
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>--group 옵션을 통해 신규 컨슈머 그룹을 생성했다. 컨슈머 그룹을 통해 가져간 토픽의 메시지는 가져간 메시지에 대해 커밋(commit)한다. 커밋이란 컨슈머가 특정 레코드까지 처리를 완료했다고 레코드의 오프셋 번호를 카프카 브로커에 저장하는 것이다. 커밋 정보는 __consumer_offsets 이름의 내부 토픽에 저장된다.</p> <p><img alt="12" data-src="data:image/png;base64,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" loading="lazy" class="lazy"></p> <h2 id="kafka-consumer-group-sh"><a href="#kafka-consumer-group-sh" class="header-anchor">#</a> kafka-consumer-group.sh</h2> <p>컨슈머 그룹은 컨슈머를 동작할 때 컨슈머 그룹 이름을 지정하면 새로 생성된다.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 컨슈머 그룹의 리스트 확인</span>
bin/kafka-consumer-groups.sh --bootstrap-server my-kafka:9092 <span class="token parameter variable">--list</span>

<span class="token comment"># 컨슈머 그룹 상세 조회</span>
bin/kafka-consumer-groups.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--group</span> hello-group <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--describe</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img alt="13" data-src="/assets/img/13.d9c2473b.png" loading="lazy" class="lazy"></p> <ul><li>GROUP, TOPIC, PARTITION : 조회한 컨슈머 그룹이 마지막으로 커밋한 토픽과 파티션을 나타낸다.</li> <li>CURRENT-OFFSET : 컨슈머 그룹이 가져간 토픽의 파티션에 가장 최신 오프셋(offset)이 몇 번인지 나타낸다. 오프셋이란 파티션의 각 레코드에 할당된 번호다. 이 번호는 데이터가 파티션에 들어올 때 마다 1씩 증가한다</li> <li>LOG-END-OFFSET : 해당 컨슈머 그룹의 컨슈머가 어느 오프셋까지 커밋했는지 알 수 있다.</li> <li>LAG : 컨슈머 그룹이 토픽의 파티션에 있는 데이터를 가져가는데에 얼마나 지연이 발생하는지 나타내는 지표.</li></ul> <h2 id="kafka-verifiable-producer-consumer-sh"><a href="#kafka-verifiable-producer-consumer-sh" class="header-anchor">#</a> kafka-verifiable-producer, consumer.sh</h2> <p>string 타입 메시지 값ㅇ르 코드 없이 주고받을 수 있다. 간단한 네트워크 통신 테스트</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-verifiable-producer.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> --max-messages <span class="token number">10</span> <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token parameter variable">--topic</span> verify-test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>전송한 데이터는 kafka-verifiable-consumer.sh로 확인 가능</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>bin/kafka-verifiable-consumer.sh --bootstrap-server my-kafka:9092 <span class="token punctuation">\</span>
<span class="token parameter variable">--topic</span> verify-test <span class="token punctuation">\</span>
--group-id test-group
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="kafka-delete-records-sh"><a href="#kafka-delete-records-sh" class="header-anchor">#</a> kafka-delete-records.sh</h2> <p>test 토픽의 0번 파티션에 저장된 데이터중 0 부터 30 오프셋 데이터까지 지우기</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> <span class="token function">vi</span> delete-topic.json

<span class="token punctuation">{</span><span class="token string">&quot;partitions&quot;</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;test&quot;</span>,<span class="token string">&quot;partition&quot;</span>:0,<span class="token string">&quot;offset&quot;</span>:50<span class="token punctuation">}</span><span class="token punctuation">]</span>,<span class="token string">&quot;version&quot;</span>:1<span class="token punctuation">}</span>

bin/kafka-delete-records.sh --bootstrap-server my-kafka:9092 --offset-json-file delete-topic.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>토픽의 특정 레코드 하나만 삭제되는 것이 아니라 파티션에 존재하는 가장 오래된 오프셋부터 지정한 오프셋까지 삭제된다. 카프카에서는 토픽의 파티션에 저장된 특정 데이터만 삭제할 수 없다.</p> <h2 id="kafka-shutdown"><a href="#kafka-shutdown" class="header-anchor">#</a> kafka shutdown</h2> <p>The Cluster ID xSMQ1fl_S6ynL-7pnLjXWQ doesn't match stored clusterId Some(vGNsOSo9S56TtQegyLvtNA) in meta.properties. The broker is trying to join the wrong cluster. Configured zookeeper.connect may be wrong.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># Kafka 데이터 디렉터리 초기화</span>
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /tmp/kafka-logs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="누구냐-넌"><a href="#누구냐-넌" class="header-anchor">#</a> 누구냐 넌</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>[2024-11-26 00:16:26,032] WARN [SocketServer brokerId=0] Unexpected error from /205.210.31.152; closing connection (org.apache.kafka.common.network.Selector)
org.apache.kafka.common.network.InvalidReceiveException: Invalid receive (size = 1195725856 larger than 104857600)
at org.apache.kafka.common.network.NetworkReceive.readFrom(NetworkReceive.java:105)
at org.apache.kafka.common.network.KafkaChannel.receive(KafkaChannel.java:448)
at org.apache.kafka.common.network.KafkaChannel.read(KafkaChannel.java:398)
at org.apache.kafka.common.network.Selector.attemptRead(Selector.java:678)
at org.apache.kafka.common.network.Selector.pollSelectionKeys(Selector.java:580)
at org.apache.kafka.common.network.Selector.poll(Selector.java:485)
at kafka.network.Processor.poll(SocketServer.scala:861)
at kafka.network.Processor.run(SocketServer.scala:760)
at java.lang.Thread.run(Thread.java:750)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><a href="https://velog.io/@sunblock99/AWS-%ED%8A%B9%EC%A0%95-IP%EB%A7%8C-%EC%A0%91%EC%86%8D%ED%95%A0-%EC%88%98-%EC%9E%88%EA%B2%8C-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0" target="_blank" rel="noopener noreferrer">aws 인바운드 규칙 설정<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div class="theme-default-content"><a href="/etc/tagList.html#kafka">
    #kafka
  </a></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/kafka/01-kafka-aws.html" class="prev">
        실습용 카프카 브로커 설치
      </a></span> <span class="next"><a href="/study/kafka/03-kafka-client.html">
        카프카 클라이언트
      </a>
      →
    </span></p></div> <div class="theme-default-content"></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1803463e.js" defer></script><script src="/assets/js/2.114321ad.js" defer></script><script src="/assets/js/1.48ed5838.js" defer></script><script src="/assets/js/34.11a6e354.js" defer></script>
  </body>
</html>
