<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>친절한 SQL 튜닝 | MIND UPLOAD</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.jpg">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-672PNZBWWP"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-672PNZBWWP');</script>
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8111136017997298" crossorigin="anonymous"></script>
    <meta name="description" content="친절한 SQL 튜닝 요약">
    <meta name="친절한 SQL 튜닝" content="친절한 SQL 튜닝 요약">
    <meta property="article:published_time" content="2023-11-18T00:00:00.000Z">
    <meta property="article:modified_time" content="2023/11/18 00:00:0">
    <meta property="og:site_name" content="MIND UPLOAD">
    <meta property="og:title" content="친절한 SQL 튜닝">
    <meta property="og:description" content="친절한 SQL 튜닝 요약">
    <meta property="og:type" content="website">
    <meta property="og:url" content="leekyounghwa.github.io/trash/%EC%B9%9C%EC%A0%88%ED%95%9CSQL%ED%8A%9C%EB%8B%9D.html">
    <meta property="og:image" content="https://leekyounghwa.github.io/logo.jpg">
    <meta name="twitter:title" content="친절한 SQL 튜닝">
    <meta name="twitter:description" content="친절한 SQL 튜닝 요약">
    <meta name="twitter:url" content="leekyounghwa.github.io/trash/%EC%B9%9C%EC%A0%88%ED%95%9CSQL%ED%8A%9C%EB%8B%9D.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://leekyounghwa.github.io/logo.jpg">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="books">
    <meta property="article:tag" content="books">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.b35e2516.css" as="style"><link rel="preload" href="/assets/js/app.1803463e.js" as="script"><link rel="preload" href="/assets/js/2.114321ad.js" as="script"><link rel="preload" href="/assets/js/1.48ed5838.js" as="script"><link rel="preload" href="/assets/js/147.e43f4766.js" as="script"><link rel="prefetch" href="/assets/js/100.eac35da4.js"><link rel="prefetch" href="/assets/js/101.12258cc1.js"><link rel="prefetch" href="/assets/js/102.855c4466.js"><link rel="prefetch" href="/assets/js/103.149ea756.js"><link rel="prefetch" href="/assets/js/104.bedd735b.js"><link rel="prefetch" href="/assets/js/105.d1aa6009.js"><link rel="prefetch" href="/assets/js/106.8fc0dd15.js"><link rel="prefetch" href="/assets/js/107.0094b4b3.js"><link rel="prefetch" href="/assets/js/108.13d02eef.js"><link rel="prefetch" href="/assets/js/109.3ecbb07e.js"><link rel="prefetch" href="/assets/js/110.6a665a79.js"><link rel="prefetch" href="/assets/js/111.84a6763f.js"><link rel="prefetch" href="/assets/js/112.3b678e56.js"><link rel="prefetch" href="/assets/js/113.a5843e7c.js"><link rel="prefetch" href="/assets/js/114.ae1841ec.js"><link rel="prefetch" href="/assets/js/115.db6387eb.js"><link rel="prefetch" href="/assets/js/116.56c7d6f1.js"><link rel="prefetch" href="/assets/js/117.ed7fd112.js"><link rel="prefetch" href="/assets/js/118.d46dd251.js"><link rel="prefetch" href="/assets/js/119.ea306945.js"><link rel="prefetch" href="/assets/js/12.096af198.js"><link rel="prefetch" href="/assets/js/120.f918c762.js"><link rel="prefetch" href="/assets/js/121.2c3d185f.js"><link rel="prefetch" href="/assets/js/122.3af868e3.js"><link rel="prefetch" href="/assets/js/123.d9ff3683.js"><link rel="prefetch" href="/assets/js/124.854614ff.js"><link rel="prefetch" href="/assets/js/125.6aaf5f2c.js"><link rel="prefetch" href="/assets/js/126.403f98e2.js"><link rel="prefetch" href="/assets/js/127.e4d1ed49.js"><link rel="prefetch" href="/assets/js/128.6718fba2.js"><link rel="prefetch" href="/assets/js/129.6e0b0b94.js"><link rel="prefetch" href="/assets/js/13.43332938.js"><link rel="prefetch" href="/assets/js/130.e75ab2c5.js"><link rel="prefetch" href="/assets/js/131.77e00221.js"><link rel="prefetch" href="/assets/js/132.fd2d07be.js"><link rel="prefetch" href="/assets/js/133.5ce0bcd6.js"><link rel="prefetch" href="/assets/js/134.c6ae46c9.js"><link rel="prefetch" href="/assets/js/135.77d4211b.js"><link rel="prefetch" href="/assets/js/136.034cc34a.js"><link rel="prefetch" href="/assets/js/137.6de167a8.js"><link rel="prefetch" href="/assets/js/138.61a81d97.js"><link rel="prefetch" href="/assets/js/139.aad0f72a.js"><link rel="prefetch" href="/assets/js/14.0db93d1d.js"><link rel="prefetch" href="/assets/js/140.19dd67ed.js"><link rel="prefetch" href="/assets/js/141.03662b70.js"><link rel="prefetch" href="/assets/js/142.d76d547a.js"><link rel="prefetch" href="/assets/js/143.29731780.js"><link rel="prefetch" href="/assets/js/144.8f93a453.js"><link rel="prefetch" href="/assets/js/145.fa289d2b.js"><link rel="prefetch" href="/assets/js/146.d1c4f6ee.js"><link rel="prefetch" href="/assets/js/148.bce60f07.js"><link rel="prefetch" href="/assets/js/15.fbca21d5.js"><link rel="prefetch" href="/assets/js/16.9198909d.js"><link rel="prefetch" href="/assets/js/17.9612f79e.js"><link rel="prefetch" href="/assets/js/18.7b246222.js"><link rel="prefetch" href="/assets/js/19.a88e8878.js"><link rel="prefetch" href="/assets/js/20.1cfdc467.js"><link rel="prefetch" href="/assets/js/21.a8367a94.js"><link rel="prefetch" href="/assets/js/22.b6f64260.js"><link rel="prefetch" href="/assets/js/23.8bac4bda.js"><link rel="prefetch" href="/assets/js/24.b562dc5b.js"><link rel="prefetch" href="/assets/js/25.4b47ddcd.js"><link rel="prefetch" href="/assets/js/26.14d4e32d.js"><link rel="prefetch" href="/assets/js/27.4380c074.js"><link rel="prefetch" href="/assets/js/28.7b36774b.js"><link rel="prefetch" href="/assets/js/29.d70bf530.js"><link rel="prefetch" href="/assets/js/3.a4144306.js"><link rel="prefetch" href="/assets/js/30.a4cbb296.js"><link rel="prefetch" href="/assets/js/31.3a68ad1d.js"><link rel="prefetch" href="/assets/js/32.7dc3d279.js"><link rel="prefetch" href="/assets/js/33.6d20313d.js"><link rel="prefetch" href="/assets/js/34.11a6e354.js"><link rel="prefetch" href="/assets/js/35.91f128ae.js"><link rel="prefetch" href="/assets/js/36.dbb0a35a.js"><link rel="prefetch" href="/assets/js/37.f9670500.js"><link rel="prefetch" href="/assets/js/38.efb820f4.js"><link rel="prefetch" href="/assets/js/39.034e0ca3.js"><link rel="prefetch" href="/assets/js/4.493e4934.js"><link rel="prefetch" href="/assets/js/40.da34b733.js"><link rel="prefetch" href="/assets/js/41.ec599f2a.js"><link rel="prefetch" href="/assets/js/42.1c8a96fd.js"><link rel="prefetch" href="/assets/js/43.aa93ed1f.js"><link rel="prefetch" href="/assets/js/44.dc57a99a.js"><link rel="prefetch" href="/assets/js/45.acb14abf.js"><link rel="prefetch" href="/assets/js/46.477c9e38.js"><link rel="prefetch" href="/assets/js/47.f01a9e68.js"><link rel="prefetch" href="/assets/js/48.b5c1e190.js"><link rel="prefetch" href="/assets/js/49.d80d62e5.js"><link rel="prefetch" href="/assets/js/5.3d17526b.js"><link rel="prefetch" href="/assets/js/50.ff3db2de.js"><link rel="prefetch" href="/assets/js/51.c4262de4.js"><link rel="prefetch" href="/assets/js/52.97e45e2f.js"><link rel="prefetch" href="/assets/js/53.79a3501c.js"><link rel="prefetch" href="/assets/js/54.d343c0a6.js"><link rel="prefetch" href="/assets/js/55.e9dbbe62.js"><link rel="prefetch" href="/assets/js/56.5d2a9008.js"><link rel="prefetch" href="/assets/js/57.a6768221.js"><link rel="prefetch" href="/assets/js/58.86db81bd.js"><link rel="prefetch" href="/assets/js/59.d10e41c7.js"><link rel="prefetch" href="/assets/js/6.7987f26d.js"><link rel="prefetch" href="/assets/js/60.1784a98d.js"><link rel="prefetch" href="/assets/js/61.b5eafbd8.js"><link rel="prefetch" href="/assets/js/62.28d69f76.js"><link rel="prefetch" href="/assets/js/63.200e2686.js"><link rel="prefetch" href="/assets/js/64.709a3b60.js"><link rel="prefetch" href="/assets/js/65.e06119fd.js"><link rel="prefetch" href="/assets/js/66.f1870113.js"><link rel="prefetch" href="/assets/js/67.9125ce80.js"><link rel="prefetch" href="/assets/js/68.4d7eac15.js"><link rel="prefetch" href="/assets/js/69.b672bda8.js"><link rel="prefetch" href="/assets/js/7.1eada8a4.js"><link rel="prefetch" href="/assets/js/70.e9b6e08f.js"><link rel="prefetch" href="/assets/js/71.e25c01a4.js"><link rel="prefetch" href="/assets/js/72.ef5c6385.js"><link rel="prefetch" href="/assets/js/73.6e07a77e.js"><link rel="prefetch" href="/assets/js/74.6ecfd390.js"><link rel="prefetch" href="/assets/js/75.df2d78fe.js"><link rel="prefetch" href="/assets/js/76.aedfda20.js"><link rel="prefetch" href="/assets/js/77.237d4dce.js"><link rel="prefetch" href="/assets/js/78.9e563f45.js"><link rel="prefetch" href="/assets/js/79.af4fbbf8.js"><link rel="prefetch" href="/assets/js/8.5463e0b2.js"><link rel="prefetch" href="/assets/js/80.b9da9c19.js"><link rel="prefetch" href="/assets/js/81.fbfae30a.js"><link rel="prefetch" href="/assets/js/82.ccd776c9.js"><link rel="prefetch" href="/assets/js/83.66520295.js"><link rel="prefetch" href="/assets/js/84.ceec13df.js"><link rel="prefetch" href="/assets/js/85.3d0743e5.js"><link rel="prefetch" href="/assets/js/86.fea7968e.js"><link rel="prefetch" href="/assets/js/87.900098f7.js"><link rel="prefetch" href="/assets/js/88.0593fd26.js"><link rel="prefetch" href="/assets/js/89.4573adfa.js"><link rel="prefetch" href="/assets/js/90.3a247c62.js"><link rel="prefetch" href="/assets/js/91.5026fed8.js"><link rel="prefetch" href="/assets/js/92.72e4e4c6.js"><link rel="prefetch" href="/assets/js/93.8afdbc29.js"><link rel="prefetch" href="/assets/js/94.3aef90e4.js"><link rel="prefetch" href="/assets/js/95.2af1811b.js"><link rel="prefetch" href="/assets/js/96.cf04ba72.js"><link rel="prefetch" href="/assets/js/97.ad18e888.js"><link rel="prefetch" href="/assets/js/98.f1a43a3d.js"><link rel="prefetch" href="/assets/js/99.8d98a9fd.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.462d82b9.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.f763044c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b35e2516.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="MIND UPLOAD" class="logo"> <span class="site-name can-hide">MIND UPLOAD</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/posts/" class="nav-link">
  TIL
</a></div><div class="nav-item"><a href="/study/" class="nav-link">
  study
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  blog
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/posts/" class="nav-link">
  TIL
</a></div><div class="nav-item"><a href="/study/" class="nav-link">
  study
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  blog
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> 친절한 SQL 튜닝</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1장-sql-처리-과정과-i-o">1장. SQL 처리 과정과 I/O</a><ul><li><a href="#_1-1-sql-파싱과-최적화">1.1 SQL 파싱과 최적화</a></li><li><a href="#_1-2-sql-공유-및-재사용">1.2 SQL 공유 및 재사용</a></li><li><a href="#데이터-저장-구조-및-i-o-메커니즘">데이터 저장 구조 및 I/O 메커니즘</a></li></ul></li><li><a href="#_2장-인덱스-기본">2장. 인덱스 기본</a><ul><li><a href="#_2-1-인덱스-구조-및-탐색">2.1 인덱스 구조 및 탐색</a></li><li><a href="#_2-2-인덱스-기본-사용법">2.2 인덱스 기본 사용법</a></li><li><a href="#_2-3-인덱스-확장기능-사용법">2.3 인덱스 확장기능 사용법</a></li></ul></li><li><a href="#_3장-인덱스-튜닝">3장. 인덱스 튜닝</a><ul><li><a href="#_3-1-테이블-액세스-최소화">3.1 테이블 액세스 최소화</a></li><li><a href="#_3-2-부분범위-처리-활용">3.2 부분범위 처리 활용</a></li><li><a href="#_3-3-인덱스-스캔-효율화">3.3 인덱스 스캔 효율화</a></li><li><a href="#_3-4-인덱스-설계">3.4 인덱스 설계</a></li></ul></li><li><a href="#_4장-조인-튜닝">4장. 조인 튜닝</a><ul><li><a href="#_4-1-nl튜닝">4.1 NL튜닝</a></li><li><a href="#_4-2-소트-머지-조인">4.2 소트 머지 조인</a></li><li><a href="#_4-3-해시-조인">4.3 해시 조인</a></li><li><a href="#_4-4-서브쿼리-조인">4.4 서브쿼리 조인</a></li></ul></li><li><a href="#_5장-소트-튜닝">5장. 소트 튜닝</a><ul><li><a href="#_5-1-소트-연산에-대한-이해">5.1 소트 연산에 대한 이해</a></li><li><a href="#_5-2-소트가-발생하지-않도록-sql-작성">5.2 소트가 발생하지 않도록 SQL 작성</a></li><li><a href="#_5-3-인덱스를-이용한-소트-연산-생략">5.3 인덱스를 이용한 소트 연산 생략</a></li><li><a href="#_5-4-sort-area를-적게-사용하도록-sql-작성">5.4 Sort Area를 적게 사용하도록 SQL 작성</a></li></ul></li><li><a href="#_6장-dml-튜닝">6장. DML 튜닝</a><ul><li><a href="#_6-1-기본-dml-튜닝">6.1 기본 DML 튜닝</a></li><li><a href="#_6-2-direct-path-i-o-활용">6.2 Direct Path I/O 활용</a></li><li><a href="#_6-3-파티션을-이용한-dml-튜닝">6.3 파티션을 이용한 DML 튜닝</a></li><li><a href="#_6-4-lock-과-트랜잭션-동시성-제어">6.4 Lock 과 트랜잭션 동시성 제어</a></li></ul></li><li><a href="#_7장-옵티마이저">7장. 옵티마이저</a><ul><li><a href="#_7-1-통계정보와-비용-계산-원리">7.1 통계정보와 비용 계산 원리</a></li><li><a href="#_7-2-옵티마이저에-대한-이해">7.2 옵티마이저에 대한 이해</a></li></ul></li><li><a href="#부록-sql-분석-도구">부록. SQL 분석 도구</a><ul><li><a href="#_1-실행계획-확인">1. 실행계획 확인</a></li><li><a href="#_2-autotrace">2. AutoTrace</a></li><li><a href="#_3-sql-트레이스">3. SQL 트레이스</a></li><li><a href="#_4-dbms-xplan-패키지">4. DBMS_XPLAN 패키지</a></li><li><a href="#_5-실시간-sql-모니터링">5. 실시간 SQL 모니터링</a></li><li><a href="#_6-v-sql">6. V$SQL</a></li></ul></li></ul></div><p></p> <h2 id="_1장-sql-처리-과정과-i-o"><a href="#_1장-sql-처리-과정과-i-o" class="header-anchor">#</a> 1장. SQL 처리 과정과 I/O</h2> <h3 id="_1-1-sql-파싱과-최적화"><a href="#_1-1-sql-파싱과-최적화" class="header-anchor">#</a> 1.1 SQL 파싱과 최적화</h3> <h4 id="_1-1-1-구조적-집합적-선언적-질의-언어"><a href="#_1-1-1-구조적-집합적-선언적-질의-언어" class="header-anchor">#</a> 1.1.1 구조적, 집합적, 선언적 질의 언어</h4> <h4 id="_1-1-2-sql-최적화"><a href="#_1-1-2-sql-최적화" class="header-anchor">#</a> 1.1.2 SQL 최적화</h4> <h4 id="_1-1-3-sql-옵티마이저"><a href="#_1-1-3-sql-옵티마이저" class="header-anchor">#</a> 1.1.3 SQL 옵티마이저</h4> <h4 id="_1-1-4-실행계획과-비용"><a href="#_1-1-4-실행계획과-비용" class="header-anchor">#</a> 1.1.4 실행계획과 비용</h4> <h4 id="_1-1-5-옵티마이저-힌트"><a href="#_1-1-5-옵티마이저-힌트" class="header-anchor">#</a> 1.1.5 옵티마이저 힌트</h4> <h3 id="_1-2-sql-공유-및-재사용"><a href="#_1-2-sql-공유-및-재사용" class="header-anchor">#</a> 1.2 SQL 공유 및 재사용</h3> <h4 id="_1-2-1-소프트-파싱-vs-하드-파싱"><a href="#_1-2-1-소프트-파싱-vs-하드-파싱" class="header-anchor">#</a> 1.2.1 소프트 파싱 vs. 하드 파싱</h4> <h4 id="_1-2-2-바인드-변수의-중요성"><a href="#_1-2-2-바인드-변수의-중요성" class="header-anchor">#</a> 1.2.2 바인드 변수의 중요성</h4> <h3 id="데이터-저장-구조-및-i-o-메커니즘"><a href="#데이터-저장-구조-및-i-o-메커니즘" class="header-anchor">#</a> 데이터 저장 구조 및 I/O 메커니즘</h3> <h4 id="_1-3-1-sql이-느린-이유"><a href="#_1-3-1-sql이-느린-이유" class="header-anchor">#</a> 1.3.1 SQL이 느린 이유</h4> <h4 id="_1-3-2-데이터베이스-저장-구조"><a href="#_1-3-2-데이터베이스-저장-구조" class="header-anchor">#</a> 1.3.2 데이터베이스 저장 구조</h4> <h4 id="_1-3-3-블록-단위-i-o"><a href="#_1-3-3-블록-단위-i-o" class="header-anchor">#</a> 1.3.3 블록 단위 I/O</h4> <h4 id="_1-3-4-시퀀셜-액세스-vs-랜덤-액세스"><a href="#_1-3-4-시퀀셜-액세스-vs-랜덤-액세스" class="header-anchor">#</a> 1.3.4 시퀀셜 액세스 vs. 랜덤 액세스</h4> <h4 id="_1-3-5-논리적-i-o-vs-물리적-i-o"><a href="#_1-3-5-논리적-i-o-vs-물리적-i-o" class="header-anchor">#</a> 1.3.5 논리적 I/O vs. 물리적 I/O</h4> <h4 id="_1-3-6-single-block-vs-multiblock-i-o"><a href="#_1-3-6-single-block-vs-multiblock-i-o" class="header-anchor">#</a> 1.3.6 Single Block vs. Multiblock I/O</h4> <h4 id="_1-3-7-table-full-scan-vs-index-range-scan"><a href="#_1-3-7-table-full-scan-vs-index-range-scan" class="header-anchor">#</a> 1.3.7 Table Full Scan vs. Index Range Scan</h4> <h4 id="_1-3-8-캐시-탐색-매커니즘"><a href="#_1-3-8-캐시-탐색-매커니즘" class="header-anchor">#</a> 1.3.8 캐시 탐색 매커니즘</h4> <h2 id="_2장-인덱스-기본"><a href="#_2장-인덱스-기본" class="header-anchor">#</a> 2장. 인덱스 기본</h2> <h3 id="_2-1-인덱스-구조-및-탐색"><a href="#_2-1-인덱스-구조-및-탐색" class="header-anchor">#</a> 2.1 인덱스 구조 및 탐색</h3> <h4 id="_2-1-1-미리보는-인덱스-튜닝"><a href="#_2-1-1-미리보는-인덱스-튜닝" class="header-anchor">#</a> 2.1.1. 미리보는 인덱스 튜닝</h4> <h4 id="_2-1-2-인덱스-구조"><a href="#_2-1-2-인덱스-구조" class="header-anchor">#</a> 2.1.2 인덱스 구조</h4> <h4 id="_2-1-3-인덱스-수직적-탐색"><a href="#_2-1-3-인덱스-수직적-탐색" class="header-anchor">#</a> 2.1.3 인덱스 수직적 탐색</h4> <h4 id="_2-1-4-인덱스-수평적-탐색"><a href="#_2-1-4-인덱스-수평적-탐색" class="header-anchor">#</a> 2.1.4 인덱스 수평적 탐색</h4> <h4 id="_2-1-5-결합-인덱스-구조와-탐색"><a href="#_2-1-5-결합-인덱스-구조와-탐색" class="header-anchor">#</a> 2.1.5 결합 인덱스 구조와 탐색</h4> <h3 id="_2-2-인덱스-기본-사용법"><a href="#_2-2-인덱스-기본-사용법" class="header-anchor">#</a> 2.2 인덱스 기본 사용법</h3> <h4 id="_2-2-1-인덱스를-사용한다는것"><a href="#_2-2-1-인덱스를-사용한다는것" class="header-anchor">#</a> 2.2.1 인덱스를 사용한다는것</h4> <h4 id="_2-2-2-인덱스를-range-scan-할-수-없는-이유"><a href="#_2-2-2-인덱스를-range-scan-할-수-없는-이유" class="header-anchor">#</a> 2.2.2. 인덱스를 Range Scan 할 수 없는 이유</h4> <h4 id="_2-2-3-더-중요한-인덱스-사용-조건"><a href="#_2-2-3-더-중요한-인덱스-사용-조건" class="header-anchor">#</a> 2.2.3 더 중요한 인덱스 사용 조건</h4> <h4 id="_2-2-4-인덱스를-이용한-소트-연산-생략"><a href="#_2-2-4-인덱스를-이용한-소트-연산-생략" class="header-anchor">#</a> 2.2.4 인덱스를 이용한 소트 연산 생략</h4> <h4 id="_2-2-5-order-by-절에서-컬럼-가공"><a href="#_2-2-5-order-by-절에서-컬럼-가공" class="header-anchor">#</a> 2.2.5 ORDER BY 절에서 컬럼 가공</h4> <h4 id="_2-2-6-select-list-에서-컬럼-가공"><a href="#_2-2-6-select-list-에서-컬럼-가공" class="header-anchor">#</a> 2.2.6 SELECT-LIST 에서 컬럼 가공</h4> <h4 id="_2-2-7-자동-형변환"><a href="#_2-2-7-자동-형변환" class="header-anchor">#</a> 2.2.7 자동 형변환</h4> <h3 id="_2-3-인덱스-확장기능-사용법"><a href="#_2-3-인덱스-확장기능-사용법" class="header-anchor">#</a> 2.3 인덱스 확장기능 사용법</h3> <h4 id="_2-3-1-index-range-scan"><a href="#_2-3-1-index-range-scan" class="header-anchor">#</a> 2.3.1 Index Range Scan</h4> <h4 id="_2-3-2-index-full-scan"><a href="#_2-3-2-index-full-scan" class="header-anchor">#</a> 2.3.2 Index Full Scan</h4> <h4 id="_2-3-3-index-unique-scan"><a href="#_2-3-3-index-unique-scan" class="header-anchor">#</a> 2.3.3 Index Unique Scan</h4> <h4 id="_2-3-4-index-skip-scan"><a href="#_2-3-4-index-skip-scan" class="header-anchor">#</a> 2.3.4 Index Skip Scan</h4> <h4 id="_2-3-5-index-fast-full-scan"><a href="#_2-3-5-index-fast-full-scan" class="header-anchor">#</a> 2.3.5 Index Fast Full Scan</h4> <h4 id="_2-3-6-index-range-scan-descending"><a href="#_2-3-6-index-range-scan-descending" class="header-anchor">#</a> 2.3.6 Index Range Scan Descending</h4> <h2 id="_3장-인덱스-튜닝"><a href="#_3장-인덱스-튜닝" class="header-anchor">#</a> 3장. 인덱스 튜닝</h2> <h3 id="_3-1-테이블-액세스-최소화"><a href="#_3-1-테이블-액세스-최소화" class="header-anchor">#</a> 3.1 테이블 액세스 최소화</h3> <h4 id="_3-1-1-테이블-랜덤-액세스"><a href="#_3-1-1-테이블-랜덤-액세스" class="header-anchor">#</a> 3.1.1 테이블 랜덤 액세스</h4> <h4 id="_3-1-2-인덱스-클러스터링-팩서"><a href="#_3-1-2-인덱스-클러스터링-팩서" class="header-anchor">#</a> 3.1.2 인덱스 클러스터링 팩서</h4> <h4 id="_3-1-3-인덱스-손익분기점"><a href="#_3-1-3-인덱스-손익분기점" class="header-anchor">#</a> 3.1.3 인덱스 손익분기점</h4> <h4 id="_3-1-4-인덱스-컬럼-추가"><a href="#_3-1-4-인덱스-컬럼-추가" class="header-anchor">#</a> 3.1.4 인덱스 컬럼 추가</h4> <h4 id="_3-1-5-인덱스만-읽고-처리"><a href="#_3-1-5-인덱스만-읽고-처리" class="header-anchor">#</a> 3.1.5 인덱스만 읽고 처리</h4> <h4 id="_3-1-6-인덱스-구조-테이블"><a href="#_3-1-6-인덱스-구조-테이블" class="header-anchor">#</a> 3.1.6 인덱스 구조 테이블</h4> <h4 id="_3-1-7-클러스터-테이블"><a href="#_3-1-7-클러스터-테이블" class="header-anchor">#</a> 3.1.7 클러스터 테이블</h4> <h3 id="_3-2-부분범위-처리-활용"><a href="#_3-2-부분범위-처리-활용" class="header-anchor">#</a> 3.2 부분범위 처리 활용</h3> <h4 id="_3-2-1-부분범위-처리"><a href="#_3-2-1-부분범위-처리" class="header-anchor">#</a> 3.2.1 부분범위 처리</h4> <h4 id="_3-2-2-부분범위-처리-구현"><a href="#_3-2-2-부분범위-처리-구현" class="header-anchor">#</a> 3.2.2 부분범위 처리 구현</h4> <h4 id="oltp-환경에서-부분범위-처리에-의한-성능개선-원리"><a href="#oltp-환경에서-부분범위-처리에-의한-성능개선-원리" class="header-anchor">#</a> OLTP 환경에서 부분범위 처리에 의한 성능개선 원리</h4> <h3 id="_3-3-인덱스-스캔-효율화"><a href="#_3-3-인덱스-스캔-효율화" class="header-anchor">#</a> 3.3 인덱스 스캔 효율화</h3> <h4 id="_3-3-1-인덱스-탐색"><a href="#_3-3-1-인덱스-탐색" class="header-anchor">#</a> 3.3.1 인덱스 탐색</h4> <h4 id="_3-3-2-인덱스-스캔-효율성"><a href="#_3-3-2-인덱스-스캔-효율성" class="header-anchor">#</a> 3.3.2 인덱스 스캔 효율성</h4> <h4 id="_3-3-3-액세스-조건과-필터-조건"><a href="#_3-3-3-액세스-조건과-필터-조건" class="header-anchor">#</a> 3.3.3 액세스 조건과 필터 조건</h4> <h4 id="_3-3-4-비교-연산자-종류와-컬럼-순서에-다른-군집성"><a href="#_3-3-4-비교-연산자-종류와-컬럼-순서에-다른-군집성" class="header-anchor">#</a> 3.3.4 비교 연산자 종류와 컬럼 순서에 다른 군집성</h4> <h4 id="_3-3-5-인덱스-선행-컬럼이-등치-조건이-아닐-때-생기는-비효율"><a href="#_3-3-5-인덱스-선행-컬럼이-등치-조건이-아닐-때-생기는-비효율" class="header-anchor">#</a> 3.3.5 인덱스 선행 컬럼이 등치(=) 조건이 아닐 때 생기는 비효율</h4> <h4 id="_3-3-6-between-을-in-list로-전환"><a href="#_3-3-6-between-을-in-list로-전환" class="header-anchor">#</a> 3.3.6 BETWEEN 을 IN-List로 전환</h4> <h4 id="_3-3-7-index-skip-scan-활용"><a href="#_3-3-7-index-skip-scan-활용" class="header-anchor">#</a> 3.3.7 Index Skip Scan 활용</h4> <h4 id="_3-3-8-in-조건은-인가"><a href="#_3-3-8-in-조건은-인가" class="header-anchor">#</a> 3.3.8 IN 조건은 '='인가</h4> <h4 id="_3-3-9-between과-like-스캔-범위-비교"><a href="#_3-3-9-between과-like-스캔-범위-비교" class="header-anchor">#</a> 3.3.9 BETWEEN과 LIKE 스캔 범위 비교</h4> <h4 id="_3-3-10-범위-검색-조건을-남용할-때-생기는-비효율"><a href="#_3-3-10-범위-검색-조건을-남용할-때-생기는-비효율" class="header-anchor">#</a> 3.3.10 범위 검색 조건을 남용할 때 생기는 비효율</h4> <h4 id="_3-3-11-다양한-옵션-처리-방식의-장단점-비교"><a href="#_3-3-11-다양한-옵션-처리-방식의-장단점-비교" class="header-anchor">#</a> 3.3.11 다양한 옵션 처리 방식의 장단점 비교</h4> <h4 id="_3-3-12-함수호출부하-해소를-위한-인덱스-구성"><a href="#_3-3-12-함수호출부하-해소를-위한-인덱스-구성" class="header-anchor">#</a> 3.3.12 함수호출부하 해소를 위한 인덱스 구성</h4> <h3 id="_3-4-인덱스-설계"><a href="#_3-4-인덱스-설계" class="header-anchor">#</a> 3.4 인덱스 설계</h3> <h4 id="_3-4-1-인덱스-설계가-어려운-이유"><a href="#_3-4-1-인덱스-설계가-어려운-이유" class="header-anchor">#</a> 3.4.1 인덱스 설계가 어려운 이유</h4> <h4 id="_3-4-2-가장-중요한-두가지-선택-기준"><a href="#_3-4-2-가장-중요한-두가지-선택-기준" class="header-anchor">#</a> 3.4.2 가장 중요한 두가지 선택 기준</h4> <h4 id="_3-4-3-스캔-효율성-이외의-판단-기준"><a href="#_3-4-3-스캔-효율성-이외의-판단-기준" class="header-anchor">#</a> 3.4.3 스캔 효율성 이외의 판단 기준</h4> <h4 id="_3-4-4-공식을-초월한-전략적-설계"><a href="#_3-4-4-공식을-초월한-전략적-설계" class="header-anchor">#</a> 3.4.4 공식을 초월한 전략적 설계</h4> <h4 id="_3-4-5-소트-연산을-생략하기-위한-컬럼-추가"><a href="#_3-4-5-소트-연산을-생략하기-위한-컬럼-추가" class="header-anchor">#</a> 3.4.5 소트 연산을 생략하기 위한 컬럼 추가</h4> <h4 id="_3-4-6-결합-인덱스-선택도"><a href="#_3-4-6-결합-인덱스-선택도" class="header-anchor">#</a> 3.4.6 결합 인덱스 선택도</h4> <h4 id="_3-4-7-중복-인덱스-제거"><a href="#_3-4-7-중복-인덱스-제거" class="header-anchor">#</a> 3.4.7 중복 인덱스 제거</h4> <h4 id="_3-4-8-인덱스-설계도-작성"><a href="#_3-4-8-인덱스-설계도-작성" class="header-anchor">#</a> 3.4.8 인덱스 설계도 작성</h4> <h2 id="_4장-조인-튜닝"><a href="#_4장-조인-튜닝" class="header-anchor">#</a> 4장. 조인 튜닝</h2> <h3 id="_4-1-nl튜닝"><a href="#_4-1-nl튜닝" class="header-anchor">#</a> 4.1 NL튜닝</h3> <h4 id="_4-1-1-기본-매커니즘"><a href="#_4-1-1-기본-매커니즘" class="header-anchor">#</a> 4.1.1 기본 매커니즘</h4> <h4 id="_4-1-2-nl-조인-실행계획-제어"><a href="#_4-1-2-nl-조인-실행계획-제어" class="header-anchor">#</a> 4.1.2 NL 조인 실행계획 제어</h4> <h4 id="_4-1-3-nl-조인-수행-과정-분석"><a href="#_4-1-3-nl-조인-수행-과정-분석" class="header-anchor">#</a> 4.1.3 NL 조인 수행 과정 분석</h4> <h4 id="_4-1-4-nl-조인-튜닝-포인트"><a href="#_4-1-4-nl-조인-튜닝-포인트" class="header-anchor">#</a> 4.1.4 NL 조인 튜닝 포인트</h4> <h4 id="_4-1-5-nl-조인-특징-요약"><a href="#_4-1-5-nl-조인-특징-요약" class="header-anchor">#</a> 4.1.5 NL 조인 특징 요약</h4> <h4 id="_4-1-6-nl-조인-튜닝-실습"><a href="#_4-1-6-nl-조인-튜닝-실습" class="header-anchor">#</a> 4.1.6 NL 조인 튜닝 실습</h4> <h4 id="_4-1-7-nl-조인-확장-매커니즘"><a href="#_4-1-7-nl-조인-확장-매커니즘" class="header-anchor">#</a> 4.1.7 NL 조인 확장 매커니즘</h4> <h3 id="_4-2-소트-머지-조인"><a href="#_4-2-소트-머지-조인" class="header-anchor">#</a> 4.2 소트 머지 조인</h3> <h4 id="_4-2-1-sga-vs-pga"><a href="#_4-2-1-sga-vs-pga" class="header-anchor">#</a> 4.2.1 SGA vs. PGA</h4> <h4 id="_4-2-2-기본-매커니즘"><a href="#_4-2-2-기본-매커니즘" class="header-anchor">#</a> 4.2.2 기본 매커니즘</h4> <h4 id="_4-2-3-소트머지-조인이-빠른-이유"><a href="#_4-2-3-소트머지-조인이-빠른-이유" class="header-anchor">#</a> 4.2.3 소트머지 조인이 빠른 이유</h4> <h4 id="_4-2-4-소트머지-조인의-주용도"><a href="#_4-2-4-소트머지-조인의-주용도" class="header-anchor">#</a> 4.2.4 소트머지 조인의 주용도</h4> <h4 id="_4-2-5-소트머지-조인-제어하기"><a href="#_4-2-5-소트머지-조인-제어하기" class="header-anchor">#</a> 4.2.5 소트머지 조인 제어하기</h4> <h4 id="_4-2-6-소트머지-조인-특징-요약"><a href="#_4-2-6-소트머지-조인-특징-요약" class="header-anchor">#</a> 4.2.6 소트머지 조인 특징 요약</h4> <h3 id="_4-3-해시-조인"><a href="#_4-3-해시-조인" class="header-anchor">#</a> 4.3 해시 조인</h3> <h4 id="_4-3-1-기본-매커니즘"><a href="#_4-3-1-기본-매커니즘" class="header-anchor">#</a> 4.3.1 기본 매커니즘</h4> <h4 id="_4-3-2-해시조인이-빠른-이유"><a href="#_4-3-2-해시조인이-빠른-이유" class="header-anchor">#</a> 4.3.2 해시조인이 빠른 이유</h4> <h4 id="_4-3-3-대용량-build-input-처리"><a href="#_4-3-3-대용량-build-input-처리" class="header-anchor">#</a> 4.3.3 대용량 Build Input 처리</h4> <h4 id="_4-3-4-해시-조인-실행계획-제어"><a href="#_4-3-4-해시-조인-실행계획-제어" class="header-anchor">#</a> 4.3.4 해시 조인 실행계획 제어</h4> <h4 id="_4-3-5-조인-메소드-선택-기준"><a href="#_4-3-5-조인-메소드-선택-기준" class="header-anchor">#</a> 4.3.5 조인 메소드 선택 기준</h4> <h3 id="_4-4-서브쿼리-조인"><a href="#_4-4-서브쿼리-조인" class="header-anchor">#</a> 4.4 서브쿼리 조인</h3> <h4 id="_4-4-1-서브쿼리-변환이-필요한-이유"><a href="#_4-4-1-서브쿼리-변환이-필요한-이유" class="header-anchor">#</a> 4.4.1 서브쿼리 변환이 필요한 이유</h4> <h4 id="_4-4-2-서브쿼리와-조인"><a href="#_4-4-2-서브쿼리와-조인" class="header-anchor">#</a> 4.4.2 서브쿼리와 조인</h4> <h4 id="_4-4-3-뷰-view-와-조인"><a href="#_4-4-3-뷰-view-와-조인" class="header-anchor">#</a> 4.4.3 뷰(View) 와 조인</h4> <h4 id="_4-4-4-스칼라-서브쿼리-조인"><a href="#_4-4-4-스칼라-서브쿼리-조인" class="header-anchor">#</a> 4.4.4 스칼라 서브쿼리 조인</h4> <h2 id="_5장-소트-튜닝"><a href="#_5장-소트-튜닝" class="header-anchor">#</a> 5장. 소트 튜닝</h2> <h3 id="_5-1-소트-연산에-대한-이해"><a href="#_5-1-소트-연산에-대한-이해" class="header-anchor">#</a> 5.1 소트 연산에 대한 이해</h3> <h4 id="_5-1-1-소트-수행-과정"><a href="#_5-1-1-소트-수행-과정" class="header-anchor">#</a> 5.1.1 소트 수행 과정</h4> <h4 id="_5-1-2-소트-오퍼레이션"><a href="#_5-1-2-소트-오퍼레이션" class="header-anchor">#</a> 5.1.2 소트 오퍼레이션</h4> <h3 id="_5-2-소트가-발생하지-않도록-sql-작성"><a href="#_5-2-소트가-발생하지-않도록-sql-작성" class="header-anchor">#</a> 5.2 소트가 발생하지 않도록 SQL 작성</h3> <h4 id="_5-2-1-union-vs-union-all"><a href="#_5-2-1-union-vs-union-all" class="header-anchor">#</a> 5.2.1 Union vs. Union All</h4> <h4 id="_5-2-2-exists-활용"><a href="#_5-2-2-exists-활용" class="header-anchor">#</a> 5.2.2 Exists 활용</h4> <h3 id="_5-3-인덱스를-이용한-소트-연산-생략"><a href="#_5-3-인덱스를-이용한-소트-연산-생략" class="header-anchor">#</a> 5.3 인덱스를 이용한 소트 연산 생략</h3> <h4 id="_5-3-1-sort-order-by-생략"><a href="#_5-3-1-sort-order-by-생략" class="header-anchor">#</a> 5.3.1 Sort Order By 생략</h4> <h4 id="_5-3-2-top-n-쿼리"><a href="#_5-3-2-top-n-쿼리" class="header-anchor">#</a> 5.3.2 Top N 쿼리</h4> <h4 id="_5-3-3-최소값-최대값-구하기"><a href="#_5-3-3-최소값-최대값-구하기" class="header-anchor">#</a> 5.3.3 최소값/최대값 구하기</h4> <h4 id="_5-3-4-이력-조회"><a href="#_5-3-4-이력-조회" class="header-anchor">#</a> 5.3.4 이력 조회</h4> <h4 id="_5-3-5-sort-group-by-생략"><a href="#_5-3-5-sort-group-by-생략" class="header-anchor">#</a> 5.3.5 Sort Group By 생략</h4> <h3 id="_5-4-sort-area를-적게-사용하도록-sql-작성"><a href="#_5-4-sort-area를-적게-사용하도록-sql-작성" class="header-anchor">#</a> 5.4 Sort Area를 적게 사용하도록 SQL 작성</h3> <h4 id="_5-4-1-소트-데이터-줄이기"><a href="#_5-4-1-소트-데이터-줄이기" class="header-anchor">#</a> 5.4.1 소트 데이터 줄이기</h4> <h4 id="_5-4-2-top-n-쿼리의-소트-부하-경감-원리"><a href="#_5-4-2-top-n-쿼리의-소트-부하-경감-원리" class="header-anchor">#</a> 5.4.2 Top N 쿼리의 소트 부하 경감 원리</h4> <h4 id="_5-4-3-top-n-쿼리가-아닐-때-발생하는-소트-부하"><a href="#_5-4-3-top-n-쿼리가-아닐-때-발생하는-소트-부하" class="header-anchor">#</a> 5.4.3 Top N 쿼리가 아닐 때 발생하는 소트 부하</h4> <h4 id="_5-4-4-분석함수에서의-top-n-소트"><a href="#_5-4-4-분석함수에서의-top-n-소트" class="header-anchor">#</a> 5.4.4 분석함수에서의 Top N 소트</h4> <h2 id="_6장-dml-튜닝"><a href="#_6장-dml-튜닝" class="header-anchor">#</a> 6장. DML 튜닝</h2> <h3 id="_6-1-기본-dml-튜닝"><a href="#_6-1-기본-dml-튜닝" class="header-anchor">#</a> 6.1 기본 DML 튜닝</h3> <h4 id="_6-1-1-dml-성능에-영향을-미치는-요서"><a href="#_6-1-1-dml-성능에-영향을-미치는-요서" class="header-anchor">#</a> 6.1.1 DML 성능에 영향을 미치는 요서</h4> <h4 id="_6-1-2-데이터베이스-call-과-성능"><a href="#_6-1-2-데이터베이스-call-과-성능" class="header-anchor">#</a> 6.1.2 데이터베이스 Call 과 성능</h4> <h4 id="_6-1-3-array-processing-활용"><a href="#_6-1-3-array-processing-활용" class="header-anchor">#</a> 6.1.3 Array Processing 활용</h4> <h4 id="_6-1-4-인덱스-및-제약-해제를-통한-대량-dml-튜닝"><a href="#_6-1-4-인덱스-및-제약-해제를-통한-대량-dml-튜닝" class="header-anchor">#</a> 6.1.4 인덱스 및 제약 해제를 통한 대량 DML 튜닝</h4> <h4 id="_6-1-5-수정가능-조인-뷰"><a href="#_6-1-5-수정가능-조인-뷰" class="header-anchor">#</a> 6.1.5 수정가능 조인 뷰</h4> <h4 id="_6-1-6-merge문-활용"><a href="#_6-1-6-merge문-활용" class="header-anchor">#</a> 6.1.6 MERGE문 활용</h4> <h3 id="_6-2-direct-path-i-o-활용"><a href="#_6-2-direct-path-i-o-활용" class="header-anchor">#</a> 6.2 Direct Path I/O 활용</h3> <h4 id="_6-2-1-direct-path-i-o"><a href="#_6-2-1-direct-path-i-o" class="header-anchor">#</a> 6.2.1 Direct Path I/O</h4> <h4 id="_6-2-2-direct-path-insert"><a href="#_6-2-2-direct-path-insert" class="header-anchor">#</a> 6.2.2 Direct Path Insert</h4> <h4 id="_6-2-3-병렬-dml"><a href="#_6-2-3-병렬-dml" class="header-anchor">#</a> 6.2.3 병렬 DML</h4> <h3 id="_6-3-파티션을-이용한-dml-튜닝"><a href="#_6-3-파티션을-이용한-dml-튜닝" class="header-anchor">#</a> 6.3 파티션을 이용한 DML 튜닝</h3> <h4 id="_6-3-1-테이블-파티션"><a href="#_6-3-1-테이블-파티션" class="header-anchor">#</a> 6.3.1 테이블 파티션</h4> <h4 id="_6-3-2-인덱스-파티현"><a href="#_6-3-2-인덱스-파티현" class="header-anchor">#</a> 6.3.2 인덱스 파티현</h4> <h4 id="_6-3-3-파티션을-활용한-대량-update-튜닝"><a href="#_6-3-3-파티션을-활용한-대량-update-튜닝" class="header-anchor">#</a> 6.3.3 파티션을 활용한 대량 UPDATE 튜닝</h4> <h4 id="_6-3-4-파티션을-활용한-대량-delete-튜닝"><a href="#_6-3-4-파티션을-활용한-대량-delete-튜닝" class="header-anchor">#</a> 6.3.4 파티션을 활용한 대량 DELETE 튜닝</h4> <h4 id="_6-4-5-파티션을-활용한-대량-insert-튜닝"><a href="#_6-4-5-파티션을-활용한-대량-insert-튜닝" class="header-anchor">#</a> 6.4.5 파티션을 활용한 대량 INSERT 튜닝</h4> <h3 id="_6-4-lock-과-트랜잭션-동시성-제어"><a href="#_6-4-lock-과-트랜잭션-동시성-제어" class="header-anchor">#</a> 6.4 Lock 과 트랜잭션 동시성 제어</h3> <h4 id="_6-4-1-오라클-lock"><a href="#_6-4-1-오라클-lock" class="header-anchor">#</a> 6.4.1 오라클 Lock</h4> <h4 id="_6-4-2-트랜잭션-동시성-제어"><a href="#_6-4-2-트랜잭션-동시성-제어" class="header-anchor">#</a> 6.4.2 트랜잭션 동시성 제어</h4> <h4 id="_6-4-3-채번-방식에-따른-insert-성능-비교"><a href="#_6-4-3-채번-방식에-따른-insert-성능-비교" class="header-anchor">#</a> 6.4.3 채번 방식에 따른 INSERT 성능 비교</h4> <h2 id="_7장-옵티마이저"><a href="#_7장-옵티마이저" class="header-anchor">#</a> 7장. 옵티마이저</h2> <h3 id="_7-1-통계정보와-비용-계산-원리"><a href="#_7-1-통계정보와-비용-계산-원리" class="header-anchor">#</a> 7.1 통계정보와 비용 계산 원리</h3> <h4 id="_7-1-1-선택도와-카디널리티"><a href="#_7-1-1-선택도와-카디널리티" class="header-anchor">#</a> 7.1.1 선택도와 카디널리티</h4> <ul><li>선택도(Selectivity) : 전체 레코드 중에서 조건절에 의해 선택되는 레코드 비율</li> <li>선택도 = 1/NDV(컬럼 값 종류 개수 'Number of Distinct Values')</li> <li>카디널리티(Cardinality) : 전체 레코드 중에서 조건절에 의해 선택되는 레코드 개수</li> <li>카디널리티 = 총 로우 수 X 선택도 = 총 로우수 / NDV</li> <li>ex : 상품분류컬럼에 '가전', '의류', '식음료', '생활용품' 네개의 값이 있을때, 선택도는 25%(1/4). 전체 레코드가 10만건이면 카디널리티는 2만5천이다.</li> <li>옵티마이저는 이렇게 카디널리티를 구하고, 그만큼의 데이터를 액세스 하는 데 드는 비용을 계산해서 테이블 액세스 방식, 조인 순서, 조인 방식 등을 결정. 비용을 계산하는 출발점은 선택도다. 선택도를 잘못 계산하면 카티널리티와 비용도 잘못 계산하고 결과적으로 비효율 적인 액세스 방식과 조인 방식 선택</li> <li>선택도를 계산할때 NDV를 사용하므로 통계정보 수집 과정에서 이 값을 정확히 구하는 것이 매우 중요하다. 통계정보 수집주기, 샘플링 비율 등을 잘 결정해야 하는 이유다.</li></ul> <h4 id="_7-1-2-통계정보"><a href="#_7-1-2-통계정보" class="header-anchor">#</a> 7.1.2 통계정보</h4> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h5 id="_1-테이블-통계"><a href="#_1-테이블-통계" class="header-anchor">#</a> (1) 테이블 통계</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 테이블 통계를 수집하는 명령어</span>
<span class="token keyword">begin</span>
	dbms_stats<span class="token punctuation">.</span>gather_table_stats<span class="token punctuation">(</span><span class="token string">'scott'</span><span class="token punctuation">,</span><span class="token string">'emp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<span class="token operator">/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 수집된 테이블 통계정보는 아래와 같이 조회할 수 있고, all_tab_statistics 뷰 에서도 같은 정보를 확인할 수 있다</span>
<span class="token keyword">select</span> num_rows<span class="token punctuation">,</span> block<span class="token punctuation">,</span> avg_row_len<span class="token punctuation">,</span> sample_size<span class="token punctuation">,</span> last_analyzed
<span class="token keyword">from</span> all_tables
<span class="token keyword">where</span> owner <span class="token operator">=</span> <span class="token string">'SCOTT'</span>
<span class="token operator">and</span> table_name <span class="token operator">=</span> <span class="token string">'EMP'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><table><thead><tr><th>통계항목</th> <th>설명</th></tr></thead> <tbody><tr><td>NUM_ROWS</td> <td>테이블에 저장된 총 레코드 개수</td></tr> <tr><td>BLOCKS</td> <td>테이블 블록 수 = '사용된' 익스텐트(데이터가 한건이라도 입력된 적이 잇는 모든 익스텐트) 에 속한 총 블록 수</td></tr> <tr><td>AVG_ROW_LEN</td> <td>레코드당 평균 길이</td></tr> <tr><td>SAMPLE_SIZE</td> <td>샘플링한 레코드 수</td></tr> <tr><td>LAST_ANALYZED</td> <td>통계정보 수집 일시</td></tr></tbody></table> <h5 id="_2-인덱스-통계"><a href="#_2-인덱스-통계" class="header-anchor">#</a> (2)인덱스 통계</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 인덱스 통계만 수집</span>
<span class="token keyword">begin</span>
	dbms_stats<span class="token punctuation">.</span>gather_index_stats <span class="token punctuation">(</span>ownname <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'scott'</span><span class="token punctuation">,</span> indname <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'emp_x01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
\
<span class="token comment">-- 테이블 통계를 수집하면서 인덱스 통계도 수집</span>
<span class="token keyword">begin</span>
	dbms_stats<span class="token punctuation">.</span>gather_table_stats <span class="token punctuation">(</span><span class="token string">'scott'</span><span class="token punctuation">,</span><span class="token string">'emp'</span><span class="token punctuation">,</span> <span class="token keyword">cascade</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
\
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 수집된 인덱스 통계정보 조회, all_ind_statistics 뷰에서도 같은 정보 확인 가능</span>
<span class="token keyword">select</span> blevel<span class="token punctuation">,</span> leaf_blocks<span class="token punctuation">,</span> num_rows<span class="token punctuation">,</span> distinct_keys
	 <span class="token punctuation">,</span> avg_leaf_blocks_per_key<span class="token punctuation">,</span> avg_data_blocks_per_key<span class="token punctuation">,</span> clustering_factor
	 <span class="token punctuation">,</span> sample_size<span class="token punctuation">,</span> last_analyzed
  <span class="token keyword">from</span> all_indexes
 <span class="token keyword">where</span> owner <span class="token operator">=</span> <span class="token string">'SCOTT'</span>
   <span class="token operator">and</span> table_name <span class="token operator">=</span> <span class="token string">'EMP'</span>
   <span class="token operator">and</span> index_name <span class="token operator">=</span> <span class="token string">'EMP_X01'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><table><thead><tr><th>통계항목</th> <th>설명</th> <th>용도</th></tr></thead> <tbody><tr><td>BLEVEL</td> <td>브랜치 레벨의 약자. 인덱스 루트에서 리프 블록에 도달하기 직전까지 읽게 되는 블록의 수</td> <td>인덱스 수직적 탐색 비용 계산(2장 1절(2.1) 과 3장3절(3.3) 참조)</td></tr> <tr><td>LEAF_BLOCK</td> <td>인덱스 리프 블록 총 개수</td> <td>인덱스 수평적 탐색 비용 계산(2.1)(3.3)참조</td></tr> <tr><td>NUM_ROWS</td> <td>인덱스에 저장된 레코드 개수</td> <td>인덱스 수평적 탐색 비용 계산(2.1)(3.3)참조</td></tr> <tr><td>DISTINCT_KEYS</td> <td>인덱스 키값의 조합으로 만들어지는 값의 종류 개수. 예를 들어 C1+C2로 구성한 인덱스에서 C1컬럼에 3개, C2컬럼에 4개 값이 있으면 최대 12개의 값의 종류가 만들어 지는데, 인덱스에 저장된 데이터 기준으로 실제 입력된 값의 종류 개수를 구해놓은 수치. 인덱스 키값을 모두 '=' 조건으로 조회할 때의 선택도(Selectivity)를 계산하는데 사용</td> <td>인덱스 수평적 탐색 비용 계산(2.1)(3.3)참조</td></tr> <tr><td>AVG_LEAF_BLOCKS_PER_KEY</td> <td>인덱스 키값을 모두 '=' 조건으로 조회할 때 읽게 될 리프 블록 개수</td> <td>인덱스 수평적 탐색 비용 계산(2.1)(3.3)참조</td></tr> <tr><td>AVG_DATA_BLOCKS_PER_KEY</td> <td>인덱스 키값을 모두 '=' 조건으로 조회할 때 읽게 될 테이블블록 개수</td> <td>테이블 액세스 비용 계산(3.1)참조</td></tr> <tr><td>CLUSTERING_FACTOR</td> <td>인덱스 키값 기준으로 테이블 데이터가 모여 있는 정도. 인덱스 전체 레코드를 스캔하면서 테이블 레코드를 찾아 갈 때 읽게 될 테이블 블록 개수를 미리 계싼해 놓은 수치(3.1.2)참조</td> <td>테이블 액세스 비용 계산(3.1)참조</td></tr></tbody></table> <h5 id="_3-컬럼-통계"><a href="#_3-컬럼-통계" class="header-anchor">#</a> (3) 컬럼 통계</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> num_distinct<span class="token punctuation">,</span> density<span class="token punctuation">,</span> avg_col_len<span class="token punctuation">,</span> low_value<span class="token punctuation">,</span> high_value<span class="token punctuation">,</span> num_nulls
     <span class="token punctuation">,</span> last_analyzed<span class="token punctuation">,</span> sample_size
  <span class="token keyword">from</span> all_tab_columns
 <span class="token keyword">where</span> owner <span class="token operator">=</span> <span class="token string">'SCOTT'</span>
   <span class="token operator">and</span> table_name <span class="token operator">=</span> <span class="token string">'EMP'</span>
   <span class="token operator">and</span> column_name <span class="token operator">=</span> <span class="token string">'DEPTNO'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><table><thead><tr><th>통계항목</th> <th>설명</th></tr></thead> <tbody><tr><td>NUM_DISTINCT</td> <td>컬럼 값의 종류 개수(NVD,Number of Distinct Values) 예를 들어 성별 컬럼이면 2</td></tr> <tr><td>DEINSITY</td> <td>'=' 조건으로 검색할때의 선택도를 미리 구해놓은 값</td></tr> <tr><td>AVG_COL_LEN</td> <td>컬럼 평균 길이(Bytes)</td></tr> <tr><td>LOW_VALUE</td> <td>최소값</td></tr> <tr><td>HIGH_VALUE</td> <td>최대값</td></tr> <tr><td>NUM_NULLS</td> <td>값이 NULL 인 레코드 수</td></tr></tbody></table> <h5 id="컬럼-히스토그램"><a href="#컬럼-히스토그램" class="header-anchor">#</a> 컬럼 히스토그램</h5> <ul><li>'=' 조건에 대한 선택도 = <code>1/NUM_DISTINCT</code> 또는 미리 구해놓은 DENSITY 값을 이용하면 된다.</li> <li>데이터 분포가 균일하지 못한 경우 공식이 잘 들어맞지 않음. -&gt; 비용 잘못 산정하여 최적이 아닌 실행계획으로 이어진다.</li> <li>따라서 옵티마이저는 일반적인 컬럼 통계 외에 히스토그램을 추가로 활용한다.</li></ul> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><table><thead><tr><th>히스토그램 유형</th> <th>설명</th></tr></thead> <tbody><tr><td>도수분포(FREQUENCY)</td> <td>값별로 빈도수 저장</td></tr> <tr><td>높이균형(HEIGHT_BALANCED)</td> <td>각 버킷의 높이가 동일하도록 데이터 분포 관리</td></tr> <tr><td>상위도수분포(TOP-FREQUENCY)</td> <td>많은 레코드를 가진 상위 n개 값에 대한 빈도수 저장(12c이상)</td></tr> <tr><td>하이브리드(HYBRID)</td> <td>도수분포와 높이균형 히스토그램의 특성 결합</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 히스토그램 수집. 테이블 통계 수집할때 method_opt 파라미터를 지정하면 된다</span>
<span class="token keyword">begin</span>
	dbms_stats<span class="token punctuation">.</span>gather_table_stats<span class="token punctuation">(</span><span class="token string">'scott'</span><span class="token punctuation">,</span><span class="token string">'emp'</span>
	<span class="token punctuation">,</span> <span class="token keyword">cascade</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token boolean">false</span><span class="token punctuation">,</span> method_opt<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'for columns ename size 10, deptno size 4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
\
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">begin</span>
	dbms_stats<span class="token punctuation">.</span>gather_table_stats<span class="token punctuation">(</span><span class="token string">'scott'</span><span class="token punctuation">,</span><span class="token string">'emp'</span>
	<span class="token punctuation">,</span> <span class="token keyword">cascade</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token boolean">false</span><span class="token punctuation">,</span> method_opt<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'for all columns size 75'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
\
<span class="token keyword">begin</span>
	dbms_stats<span class="token punctuation">.</span>gather_table_stats<span class="token punctuation">(</span><span class="token string">'scott'</span><span class="token punctuation">,</span><span class="token string">'emp'</span>
	<span class="token punctuation">,</span> <span class="token keyword">cascade</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token boolean">false</span><span class="token punctuation">,</span> method_opt<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token string">'for all columns size auto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
\
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 수집된 컬럼 히스토그램 조회, all_tab_histograms 뷰에서도 같은 정보를 확인할 수 있다</span>
<span class="token keyword">select</span> endpoint_value<span class="token punctuation">,</span> endpoint_number
  <span class="token keyword">from</span> all_histograms
 <span class="token keyword">where</span> owner <span class="token operator">=</span><span class="token string">'SCOTT'</span>
   <span class="token operator">and</span> table_name <span class="token operator">=</span> <span class="token string">'EMP'</span>
   <span class="token operator">and</span> column_name <span class="token operator">=</span> <span class="token string">'DEPTNO'</span>
 <span class="token keyword">order</span> <span class="token keyword">by</span> endpoint_value<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="_4-시스템-통계"><a href="#_4-시스템-통계" class="header-anchor">#</a> (4) 시스템 통계</h5> <ul><li>시스템통계 : 어플리케이션 및 하드웨어 성능 특성을 측정한 것. CPU 속도, 평균적인 Single Block I/O 속도, 평균적인 Multiblock I/O 속도, 평균적인 Multiblock I/O 개수, I/O 서브시스템의 최대 처리량(Throughput), 병렬 Slave의 평균적인 처리량(Throuthput)</li> <li>시스템 사양, 애플리케이션 특성(OLAP, DW) 및 동시 트랜잭션 발생량에 따라서도 성능 특성이 달라진다. 이에 오라클에서 특성 반영을 위해 9i부터 시스템 통계 수집 기능 도입</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 시스템 통계 조회</span>
<span class="token keyword">select</span> sname<span class="token punctuation">,</span> pname<span class="token punctuation">,</span> pval1<span class="token punctuation">,</span> pval2 <span class="token keyword">from</span> sys<span class="token punctuation">.</span>aux_stats$<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_7-1-3-비용-계산-원리"><a href="#_7-1-3-비용-계산-원리" class="header-anchor">#</a> 7.1.3 비용 계산 원리</h4> <h3 id="_7-2-옵티마이저에-대한-이해"><a href="#_7-2-옵티마이저에-대한-이해" class="header-anchor">#</a> 7.2 옵티마이저에 대한 이해</h3> <h4 id="_7-2-1-옵티마이저-종류"><a href="#_7-2-1-옵티마이저-종류" class="header-anchor">#</a> 7.2.1 옵티마이저 종류</h4> <h4 id="_7-2-2-옵티마이저-모드"><a href="#_7-2-2-옵티마이저-모드" class="header-anchor">#</a> 7.2.2 옵티마이저 모드</h4> <h4 id="_7-2-3-옵티마이저에-영향을-미치는-요소"><a href="#_7-2-3-옵티마이저에-영향을-미치는-요소" class="header-anchor">#</a> 7.2.3 옵티마이저에 영향을 미치는 요소</h4> <h4 id="_7-2-4-옵티마이저의-한계"><a href="#_7-2-4-옵티마이저의-한계" class="header-anchor">#</a> 7.2.4 옵티마이저의 한계</h4> <h4 id="_7-2-5-개발자의-역할"><a href="#_7-2-5-개발자의-역할" class="header-anchor">#</a> 7.2.5 개발자의 역할</h4> <h4 id="_7-2-6-튜닝-전문가-되는-공부방법"><a href="#_7-2-6-튜닝-전문가-되는-공부방법" class="header-anchor">#</a> 7.2.6 튜닝 전문가 되는 공부방법</h4> <h2 id="부록-sql-분석-도구"><a href="#부록-sql-분석-도구" class="header-anchor">#</a> 부록. SQL 분석 도구</h2> <h3 id="_1-실행계획-확인"><a href="#_1-실행계획-확인" class="header-anchor">#</a> 1. 실행계획 확인</h3> <h3 id="_2-autotrace"><a href="#_2-autotrace" class="header-anchor">#</a> 2. AutoTrace</h3> <h3 id="_3-sql-트레이스"><a href="#_3-sql-트레이스" class="header-anchor">#</a> 3. SQL 트레이스</h3> <h3 id="_4-dbms-xplan-패키지"><a href="#_4-dbms-xplan-패키지" class="header-anchor">#</a> 4. DBMS_XPLAN 패키지</h3> <h3 id="_5-실시간-sql-모니터링"><a href="#_5-실시간-sql-모니터링" class="header-anchor">#</a> 5. 실시간 SQL 모니터링</h3> <h3 id="_6-v-sql"><a href="#_6-v-sql" class="header-anchor">#</a> 6. V$SQL</h3></div> <div class="theme-default-content"><a href="/etc/tagList.html#books">
    #books
  </a></div> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="theme-default-content"></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1803463e.js" defer></script><script src="/assets/js/2.114321ad.js" defer></script><script src="/assets/js/1.48ed5838.js" defer></script><script src="/assets/js/147.e43f4766.js" defer></script>
  </body>
</html>
