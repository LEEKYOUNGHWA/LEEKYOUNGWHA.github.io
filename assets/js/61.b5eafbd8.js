(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{430:function(s,a,t){s.exports=t.p+"assets/img/17.8884acd0.png"},619:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"카프카-커넥트"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#카프카-커넥트"}},[s._v("#")]),s._v(" 카프카 커넥트")]),s._v(" "),a("ul",[a("li",[s._v("kafka connect : 카프카 오픈소스에 포함된 툴 중 하나로 데이터 파이프라인 생성 시 작업 형태를 템플릿으로 만들어 반복 작업을 줄이고 효율적인 전송을 이루기 위한 애플리케이션.")]),s._v(" "),a("li",[s._v("소스 커넥터(source connector) : 프로듀서 역할")]),s._v(" "),a("li",[s._v("싱크 커넥터(sink connector) : 컨슈머 역할")])]),s._v(" "),a("h2",{attrs:{id:"커넥트-실행"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#커넥트-실행"}},[s._v("#")]),s._v(" 커넥트 실행")]),s._v(" "),a("h3",{attrs:{id:"단일모드-커넥트"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#단일모드-커넥트"}},[s._v("#")]),s._v(" 단일모드 커넥트")]),s._v(" "),a("p",[s._v("커넥트 파일 수정")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" config\nlkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" connect-standalone.properties\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bootstrap.servers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("my-kafka:9092\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key.converter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.kafka.connect.json.JsonConverter\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value.converter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.kafka.connect.json.JsonConverter\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key.converter.schemas.enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value.converter.schemas.enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("offset.storage.file.filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/connect.offsets\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("offset.flush.interval.ms")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("plugin.path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/share/java,/usr/local/share/kafka/plugins\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("단일모드 커넥트는 커넥스 설정파일 정의 실행해야 한다. 예시로 기본제공하는 파일소스커넥터 실행")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" connect-file-source.properties\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("local-file-source\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connector.class")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("FileStreamSource\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tasks.max")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/test.txt\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topic")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("connect-test\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("단일모드 커넥터 실행")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0$ bin/connect-standalone.sh config/connect-standalone.properties "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config/connect-file-source.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("동작확인!")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /tmp\nlkh@DESKTOP-1L2VEPP:/tmp$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" test.txt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# test.txt 수정")]),s._v("\n\nlkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0$ bin/kafka-console-consumer.sh --bootstrap-server my-kafka:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" connect-test --from-beginning\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"234567890"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"어디로 가니"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"분산모드-커넥트"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#분산모드-커넥트"}},[s._v("#")]),s._v(" 분산모드 커넥트")]),s._v(" "),a("p",[s._v("분산모드 설정파일")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" connect-distributed.properties\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bootstrap.servers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("my-kafka:9092\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("group.id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("connect-cluster\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key.converter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.kafka.connect.json.JsonConverter\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value.converter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.kafka.connect.json.JsonConverter\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key.converter.schemas.enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value.converter.schemas.enable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("offset.storage.topic")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("connect-offsets\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("offset.storage.replication.factor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config.storage.topic")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("connect-configs\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("config.storage.replication.factor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status.storage.topic")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("connect-status\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("status.storage.replication.factor")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("offset.flush.interval.ms")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("plugin.path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/share/java,/usr/local/share/kafka/plugins\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("실행")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("bin/connect-distributed.sh config/connect-distributed.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 커넥트에 사용할수 있는 플러그인 조회")]),s._v("\nlkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" GET http://localhost:8083/connector-plugins\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#########")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.apache.kafka.connect.file.FileStreamSinkConnector"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sink"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.5.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.apache.kafka.connect.file.FileStreamSourceConnector"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2.5.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.apache.kafka.connect.mirror.MirrorCheckpointConnector"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.apache.kafka.connect.mirror.MirrorHeartbeatConnector"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"class"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.apache.kafka.connect.mirror.MirrorSourceConnector"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"source"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# FileStreamSourceConnector 실행")]),s._v("\nlkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" POST "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type: application/json"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n> "name":"local-file-source",\n> "config":{\n> "connector.class":"org.apache.kafka.connect.file.FileStreamSourceConnector",\n> "file":"/tmp/test.txt",\n> "tasks.max":"1",\n> "topic":"connect-test"\n> }\n> }\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" http://localhost:8083/connectors\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 실행확인")]),s._v("\nlkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" GET http://localhost:8083/connectors/local-file-source/status\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# {"name":"local-file-source","connector":{"state":"RUNNING","worker_id":"127.0.1.1:8083"},"tasks":[{"id":0,"state":"RUNNING","worker_id":"127.0.1.1:8083"}],"type":"source"}')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 커넥터 종료")]),s._v("\nlkh@DESKTOP-1L2VEPP:~/kafka_2.12-2.5.0/config$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" DELETE http://localhost:8083/connectors/local-file-source\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h2",{attrs:{id:"소스-커넥터"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#소스-커넥터"}},[s._v("#")]),s._v(" 소스 커넥터")]),s._v(" "),a("h3",{attrs:{id:"파일소스-커넥터-구현"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#파일소스-커넥터-구현"}},[s._v("#")]),s._v(" 파일소스 커넥터 구현")]),s._v(" "),a("ul",[a("li",[s._v("로컬에 저장된 파일을 토픽으로 한줄씩 읽어 토픽으로 보내는 파일소스 커넥터 작성")]),s._v(" "),a("li",[s._v("build.gradle에 connect-api 라이브러리와 빌드된 파일을 jar로 압축하기 위한 스크립트 작성")]),s._v(" "),a("li",[s._v("카프카 커넥터를 직접 개발하고 플러그인으로 커넥트에 추가할 때 주의할점은 사용자가 직접 작성한 클래스뿐만 아니라 참조하는 라이브러리도 함께 빌드하여 jar로 압축")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/bjpublic/apache-kafka-with-java/tree/master/Chapter3/3.6%20kafka-connector/simple-source-connector",target:"_blank",rel:"noopener noreferrer"}},[s._v("소스"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"실행"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#실행"}},[s._v("#")]),s._v(" 실행")]),s._v(" "),a("ol",[a("li",[s._v("자르 생성")])]),s._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"17","data-src":t(430),loading:"lazy"}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("커넥트 플러그인 디렉토리 생성 및 자르 넣기")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /usr/local/share/kafka/plugins\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /mnt/c/simple-source-connector-1.0.jar /usr/local/share/kafka/plugins\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("분산모드 커넥터 실행")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("bin/connect-distributed.sh config/connect-distributed.properties "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 분산모드 커넥터 실행")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" GET http://localhost:8083/connector-plugins "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 실행가능 플러그인 조회")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 추가 된 것을 확인할 수 있다 !\n[{"class":"com.example.SingleFileSourceConnector","type":"source","version":"1.0"}, \n{"class":"org.apache.kafka.connect.file.FileStreamSinkConnector","type":"sink","version":"2.5.0"}, \n{"class":"org.apache.kafka.connect.file.FileStreamSourceConnector","type":"source","version":"2.5.0"}, \n{"class":"org.apache.kafka.connect.mirror.MirrorCheckpointConnector","type":"source","version":"1"},{"class":"org.apache.kafka.connect.mirror.MirrorHeartbeatConnector","type":"source","version":"1"}, \n{"class":"org.apache.kafka.connect.mirror.MirrorSourceConnector","type":"source","version":"1"}]\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SingleFileSourceConnector 실행")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" POST "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-H")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Content-Type: application/json"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--data")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{\n"name":"single-file-source",\n"config":{\n"connector.class":"com.example.SingleFileSourceConnector",\n"tasks.max":"1"\n}\n}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nhttp://localhost:8083/connectors\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 실행확인")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" GET http://localhost:8083/connectors/single-file-source/status\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /tmp/kafka.txt 수정")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 조회")]),s._v("\nbin/kafka-console-consumer.sh --bootstrap-server my-kafka:9092 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--from-beginning\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h2",{attrs:{id:"싱크-커넥터"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#싱크-커넥터"}},[s._v("#")]),s._v(" 싱크 커넥터")]),s._v(" "),a("ul",[a("li",[s._v("토픽의 데이터를 타깃 애플리케이션으로 저장\n"),a("a",{attrs:{href:"https://github.com/bjpublic/apache-kafka-with-java/tree/master/Chapter3/3.6%20kafka-connector/simple-sink-connector",target:"_blank",rel:"noopener noreferrer"}},[s._v("소스"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"미러메이커2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#미러메이커2"}},[s._v("#")]),s._v(" 미러메이커2")]),s._v(" "),a("ul",[a("li",[s._v("두개의 카프카 클러스터간에 토픽을 복제하는 애플리케이션")])])])}),[],!1,null,null,null);a.default=e.exports}}]);